# 職務経歴書

## プロフィール

- 名前：松村有倫（まつむらありみち）
- GitHub: @popon-01


## スキル

### 言語

- Go
    - 業務で発生する実装などにメインで使用しています。
- Python
    - 大学のサークル活動・授業などで利用していました。
    - 業務でもちょっとした計算処理などに用いています。
- Java
    - 大学の授業や開発演習などで使用経験があります。
- C/C++
    - 競技プログラミングの実装で利用していた程度です。
- OCaml
    - 大学の研究での実装で利用していました。
- Common Lisp
    - 大学のサークル活動など趣味で書いていました。

### ミドルウェア

- nginx
- Redis
- MySQL

### クラウドサービス

- GCP
  - GKE
  - Cloud Run
  - Cloud Memorystore for Redis
  - Cloud SQL
  - BigQuery
  - PubSub
  - Cloud Logging

### CI

- CircleCI
- Github Actions

### その他

- Docker
- kubernetes

## 職務経歴

- 合同会社DMM.com（2020年4月 - 現在）

### 合同会社DMM.com（2020年4月 - 現在）

動画サービスやECなど様々な事業を展開している会社で勤務していました。

新卒で入社し、その後現在まで会員・決済など事業部横断で利用される機能を管理する部署で勤務しています。
各横断基盤を提供するWeb APIのGatewayサーバーやそのGatewayサーバーから利用される認可サーバーの保守・運用を担当しています。

#### 新卒研修（2020年4月 - 2020年7月）

入社後、Web周辺の技術領域について横断的に一通り研修を受けました。バックエンド・フロントエンド・モバイルアプリ・機械学習など各領域について座学と演習を行いました。研修の最後にはチームを組んでの開発演習を行い、サービスの企画から実装までチームで開発を行いました。

#### APIクライアント管理業務の改善（2020年7月 - 2020年10月）

API GatewayではOAuth2をベースとする認可を行っており、チームではそのためのAPIクライアントを管理していました。当時はクライアントの発行やスコープの追加の申請をチケットで管理しており、申請を受けてメンバーが手動で作業を行っていました。

プロジェクトではこの作業の半自動化を行いました。API経由で申請を管理し、メンバーが申請を承認するとクライアント管理のためのジョブが実行されるような仕組みを実装しました。自分は業務フローの設計やAPI設計、バックエンドAPIの実装を担当しました。

定期的に発生する定型業務の作業量を大幅に減らすことができ、チームの負荷や申請のリードタイムを改善することができました。

#### 認可サーバーのクラウド移行（2020年10月 - 2022年12月）

スケーリングなどのインフラ管理のオペレーションコストを下げることを目的として、オンプレミス環境で稼動しているAPI Gatwayの認可サーバーのクラウド移行を行うプロジェクトを行いました。クラウド版システムの構成や移行計画の設計と移行のために必要となる作業のための実装を担当しました。また、プロジェクトが泥沼化してチームの他メンバーの助力を仰いだ際、作業内容の取りまとめやタスク割り振りなども行いました。

共通機能全ての認可処理を扱うサーバーということもあって、ゼロダウンタイムでの移行が求められました。ゼロダウンタイムでの移行に際しては特にDBのデータを同期して移行させる部分が課題でした。許容できるダウンタイムの短さや稼動しているDBのバージョンの古さからサードパーティの既存の仕組みを使うことができませんでした。そのため、DBの移行に関しては自前の実装による工夫が必要でした。主にこの点について移行を進めるなかで問題が見つかり、数回の計画変更を行うこととなりました。これらの計画変更以外にも移行を進めるなかで様々な課題点がみつかり、なかなか収束しなかったためプロジェクトが長期化することとなりました。

作業者としては2022年12月ごろまでこのプロジェクトに携わっていました。しかし、パフォーマンスのチューニングがうまく進まず目標性能を達成できなかったため2023年4月ごろチームリーダーとしてプロジェクトを凍結する判断をしました。計画の重要性と難しさを痛感した案件となりました。

#### チームリーダー業務（2022年4月 - 現在）

2022年4月からチームリーダーを担当しています。チームで動いているプロジェクトについて、メンバーからの相談を受けたり進め方のレビューを実施したりしています。また、タスク管理やルール作りなどのチームの仕組み作りも行いました。

2023年1月以降は作業者としてプロジェクトに参加することをやめ、リーダー業務に専念しつつ細かな保守や開発を担当するようになりました。2023年1月以降チームで進めていたプロジェクトには以下のものがあります。

##### API Gateway の障害インパクト軽減 （2023年2月 - 2023年8月）
2023年1月に決済APIの不具合の影響に巻き込まれてGateway全体がダウンしてしまうという障害がありました。これを受けてバックエンドのAPIの障害影響を抑えるための対策を行いました。

まず、オンプレミス環境への踏み台プロキシについて認可サーバーが経由するサーバーを分離・独立させる対応を行いました。Gatewayが利用している認可サーバーについて影響の波及を抑えることで、障害の際にもGateway全体がダウンすることを回避できるようになりました。

また、Gatewayの全エンドポイントに対して横断的にサーキットブレーカーを導入しました。障害のあったエンドポイントへのアクセスを止めることでGatewayやその周辺のシステムが障害の影響を受ける状態から早期に復帰できるようになりました。

##### API Gateway キャッシュサーバー負荷障害対策（2023年5月 - 2023年8月）

Gatewayへのトラフィックの増加に伴い、深夜ピーク帯にパフォーマンスが落ちてレイテンシが上がってしまう問題が発生するようになりました。原因はGatewayがキャッシュサーバーとして利用しているRedisサーバーの性能不足でした。影響を抑えるための暫定対応を行いつつ、Redisバージョンアップによるthreaded I/Oの有効化やリードレプリカの導入などによる性能向上をを急ぎ対応しました。

##### API Gatewayのエンドポイント設定管理委譲（2023年7月 - 現在）

Gatewayのエンドポイント設定はGitHubで管理しており、設定変更は各チームがPRの形で依頼することで行っています。このPRのレビューをチームで行っているのですが、設定のレビューの際にバックエンドチームとのコミュニケーションが必要な部分が多くチームの負担になっています。エンドポイント設定の管理を各バックエンドチームに委譲することで、コミュニケーションコストやリードタイムを減らすことを目指しています。そのために必要な権限管理や設定バリデーションの仕組みを構築しています。

##### フロントアプリケーション用Gatewayの用意（2023年7月 - 現在）

共通基盤機能を提供するAPIの稼動環境として、部署ではkubernetesクラスタを管理しています。API Gatewayはこのクラスタで稼動するアプリケーションに対する外部エンドポイントを提供する役割も担っています。このクラスタでバックエンドアプリケーションだけでなくフロントエンドアプリケーションもサポートすることになったため、フロントエンドアプリケーションの外部エンドポイントを提供するアプリケーションの実装を進めています。

##### API Gateway の性能検証・チューニング（2023年6月 - 現在）

共通基盤の新機能を開発するにあたり、バックエンドのAPIへのトラフィックが大幅に増えることになりました。それに伴ってGatewayの負荷も上がることになるため、性能の検証を行うことになりました。性能試験の準備・実施を行い、新機能実現に向けた負荷対策は完了しましたが、今後に向けて限界性能とそのボトルネックの調査を引き続き進めています。

#### チームの指針検討（2023年5月 - 現在）

チームやプロダクトの将来像を決めるための活動を行っています。将来の方向性を検討する中でチームのミッションやビジョンの整備を行う必要があると感じ、定義の認識あわせや内容決めを行いました。現在はロードマップ管理の仕組みづくりを進めていて、ロードマップ更新の枠組み設計や新規案件検討のための利用者アンケートの準備を行っています。

#### API Gateway・認可サーバーの保守開発（2020年7月 - 現在）

上記のプロジェクトと並行して、API Gatwayや認可サーバーの保守として問い合わせ対応や不具合・障害の対応、機能追加のための細かな開発などを行っています。

## 自己PR

キャッチアップやトラブルシュートのための調査力には自信があります。API Gatewayも認可サーバーも自分が配属される前からあったシステムですが、様々な業務で理解を深めていった結果今ではどちらについても社内トップレベルで熟知しているという自負があります。コードベースやドキュメントを調査して情報を整理するのは得意だと思います。

不具合調査や障害調査についても多く経験しています。API Gatewayというプロダクトの性質上、複数のアプリケーションにまたがった処理を追う機会も多かったです。これらの調査を通じて問題の切り分けを行う力も身に付けられていると感じています。

また、チームリーダー業務を通じて自分の意志で決定を行う経験も積んでいます。チームのアクションを決めたりチームメンバーの相談に乗る上で、課題に対する対応について自分の答えを用意する場面は多くありました。共通基盤の全APIの入り口という影響力の大きいプロダクトを運用する中で、課題に対するベストな対応は何なのか状況を踏まえた上で考えるということも多かったです。
